<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>sonoPleth — Real-Time Engine</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Archivo+Narrow:wght@400;500;600;700&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300&display=swap');

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0f0f0f;
    --bg2: #141414;
    --bg3: #1a1a1a;
    --surface: #1c1c1c;
    --border: rgba(255,255,255,0.07);
    --border-light: rgba(255,255,255,0.12);
    --text: #e8e8e4;
    --muted: #6b6b66;
    --muted2: #4a4a46;
    --accent: #e8e8e4;
    --accent-dim: rgba(232,232,228,0.15);
    --green: #34C759;
    --green-dim: rgba(52,199,89,0.15);
    --yellow: #FFCC00;
    --yellow-dim: rgba(255,204,0,0.15);
    --orange: #FF9F0A;
    --red: #FF3B30;
    --font-mono: 'Space Mono', monospace;
    --font-ui: 'Archivo Narrow', sans-serif;
    --font-display: 'Cormorant Garamond', serif;
  }

  html, body {
    height: 100%;
    background: var(--bg);
    color: var(--text);
    font-family: var(--font-ui);
    font-size: 13px;
    letter-spacing: 0.01em;
    overflow: hidden;
  }

  /* ── Grain overlay ── */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='1'/%3E%3C/svg%3E");
    opacity: 0.025;
    pointer-events: none;
    z-index: 9999;
  }

  /* ══ LAYOUT ══ */
  .app {
    display: grid;
    grid-template-rows: 48px 1fr;
    height: 100vh;
    width: 100vw;
    max-width: 860px;
    margin: 0 auto;
    background: var(--bg);
    border-left: 1px solid var(--border);
    border-right: 1px solid var(--border);
    position: relative;
    overflow: hidden;
  }

  /* Background sacred geometry */
  .app::after {
    content: '';
    position: absolute;
    top: -120px;
    right: -180px;
    width: 520px;
    height: 520px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400'%3E%3Cg fill='none' stroke='%23ffffff' stroke-width='0.4' opacity='0.06'%3E%3Ccircle cx='200' cy='200' r='180'/%3E%3Ccircle cx='200' cy='200' r='140'/%3E%3Ccircle cx='200' cy='200' r='100'/%3E%3Ccircle cx='200' cy='200' r='60'/%3E%3Cline x1='20' y1='200' x2='380' y2='200'/%3E%3Cline x1='200' y1='20' x2='200' y2='380'/%3E%3Cline x1='72' y1='72' x2='328' y2='328'/%3E%3Cline x1='328' y1='72' x2='72' y2='328'/%3E%3Cpolygon points='200,30 357,115 357,285 200,370 43,285 43,115'/%3E%3Cpolygon points='200,80 320,145 320,255 200,320 80,255 80,145'/%3E%3C/g%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    pointer-events: none;
    z-index: 0;
  }

  /* ── Header ── */
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    border-bottom: 1px solid var(--border);
    background: var(--bg);
    position: relative;
    z-index: 10;
  }

  .header-logo {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .logo-glyph {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
  }

  .logo-name {
    font-family: var(--font-display);
    font-size: 16px;
    font-weight: 400;
    letter-spacing: 0.08em;
    color: var(--text);
  }

  .logo-name em {
    font-style: italic;
    font-weight: 300;
    opacity: 0.6;
    font-size: 13px;
    letter-spacing: 0.04em;
  }

  .header-pipeline {
    font-family: var(--font-mono);
    font-size: 9px;
    letter-spacing: 0.12em;
    color: var(--muted);
    text-transform: uppercase;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
  }

  .header-pipeline span { color: var(--muted2); }

  .header-status {
    display: flex;
    align-items: center;
    gap: 6px;
    font-family: var(--font-mono);
    font-size: 9px;
    letter-spacing: 0.1em;
    color: var(--muted);
    text-transform: uppercase;
  }

  .status-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--green);
    box-shadow: 0 0 6px var(--green);
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  /* ── Scroll area ── */
  .scroll-area {
    overflow-y: auto;
    overflow-x: hidden;
    padding: 16px 18px 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    position: relative;
    z-index: 1;
  }

  .scroll-area::-webkit-scrollbar { width: 4px; }
  .scroll-area::-webkit-scrollbar-track { background: transparent; }
  .scroll-area::-webkit-scrollbar-thumb { background: var(--border-light); border-radius: 2px; }

  /* ── Cards ── */
  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 16px 18px;
    position: relative;
    overflow: hidden;
  }

  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
  }

  .section-label {
    font-family: var(--font-mono);
    font-size: 8.5px;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .section-label::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border);
  }

  /* ── Input panel ── */
  .field-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
  }

  .field-label {
    font-family: var(--font-mono);
    font-size: 8.5px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: var(--muted);
    width: 110px;
    flex-shrink: 0;
  }

  .field-input {
    flex: 1;
    background: var(--bg2);
    border: 1px solid var(--border);
    border-radius: 3px;
    padding: 7px 10px;
    font-family: var(--font-mono);
    font-size: 10px;
    color: var(--muted);
    letter-spacing: 0.05em;
  }

  .field-input.filled {
    color: var(--text);
    border-color: var(--border-light);
  }

  .field-hint {
    font-family: var(--font-mono);
    font-size: 8px;
    color: var(--green);
    letter-spacing: 0.08em;
    margin-left: 4px;
    white-space: nowrap;
  }

  .btn-browse {
    background: transparent;
    border: 1px solid var(--border-light);
    border-radius: 3px;
    padding: 7px 12px;
    font-family: var(--font-mono);
    font-size: 8.5px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--muted);
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.15s;
  }

  .btn-browse:hover {
    border-color: var(--border-light);
    color: var(--text);
    background: var(--accent-dim);
  }

  .select-field {
    background: var(--bg2);
    border: 1px solid var(--border);
    border-radius: 3px;
    padding: 7px 10px;
    font-family: var(--font-mono);
    font-size: 10px;
    color: var(--muted);
    letter-spacing: 0.05em;
    appearance: none;
    width: 130px;
  }

  .opts-row {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-top: 2px;
  }

  .checkbox-row {
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: var(--font-mono);
    font-size: 9px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--muted);
    cursor: pointer;
  }

  .checkbox-box {
    width: 14px;
    height: 14px;
    border: 1px solid var(--border-light);
    border-radius: 2px;
    background: var(--bg2);
    flex-shrink: 0;
  }

  /* ── Transport panel ── */
  .transport-row {
    display: flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;
  }

  .transport-row + .transport-row {
    margin-top: 10px;
  }

  .btn {
    border-radius: 3px;
    padding: 8px 16px;
    font-family: var(--font-mono);
    font-size: 9px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.12s;
    border: 1px solid transparent;
  }

  .btn-primary {
    background: var(--text);
    color: var(--bg);
    border-color: var(--text);
    font-weight: 700;
    letter-spacing: 0.18em;
    padding: 9px 22px;
  }

  .btn-primary:hover {
    background: #fff;
  }

  .btn-secondary {
    background: transparent;
    color: var(--muted);
    border-color: var(--border-light);
  }

  .btn-secondary:hover {
    color: var(--text);
    border-color: rgba(255,255,255,0.2);
  }

  .btn-danger {
    background: transparent;
    color: rgba(255,59,48,0.7);
    border-color: rgba(255,59,48,0.2);
  }

  .btn-danger:hover {
    background: rgba(255,59,48,0.08);
    border-color: rgba(255,59,48,0.4);
    color: var(--red);
  }

  .btn-disabled {
    opacity: 0.25;
    cursor: not-allowed;
  }

  .spacer { flex: 1; }

  /* Status pill */
  .pill {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 5px 12px;
    border-radius: 20px;
    border: 1px solid rgba(52,199,89,0.2);
    background: rgba(52,199,89,0.08);
    font-family: var(--font-mono);
    font-size: 9px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: var(--green);
  }

  .pill-dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: var(--green);
    box-shadow: 0 0 4px var(--green);
    animation: pulse 2s ease-in-out infinite;
  }

  .osc-label {
    font-family: var(--font-mono);
    font-size: 8.5px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--muted2);
  }

  .osc-label span {
    color: var(--muted);
  }

  /* ── Controls panel ── */
  .param-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
  }

  .param-label {
    font-family: var(--font-mono);
    font-size: 9px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--muted);
    width: 148px;
    flex-shrink: 0;
  }

  .param-track {
    flex: 1;
    height: 2px;
    background: var(--bg2);
    border-radius: 1px;
    position: relative;
  }

  .param-fill {
    position: absolute;
    top: 0; left: 0; bottom: 0;
    background: var(--text);
    border-radius: 1px;
    opacity: 0.6;
  }

  .param-thumb {
    position: absolute;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--text);
    border: 1.5px solid var(--bg);
    box-shadow: 0 0 0 1px rgba(255,255,255,0.2);
  }

  .param-value {
    font-family: var(--font-mono);
    font-size: 10px;
    color: var(--muted);
    width: 44px;
    text-align: right;
    letter-spacing: 0.06em;
  }

  .param-osc {
    font-family: var(--font-mono);
    font-size: 7.5px;
    letter-spacing: 0.1em;
    color: var(--muted2);
    width: 36px;
    text-align: right;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Toggle */
  .toggle-row {
    display: flex;
    align-items: center;
    gap: 10px;
    padding-top: 4px;
  }

  .toggle-track {
    width: 36px;
    height: 20px;
    border-radius: 10px;
    background: var(--bg2);
    border: 1px solid var(--border-light);
    position: relative;
    cursor: pointer;
  }

  .toggle-thumb {
    position: absolute;
    top: 3px;
    left: 3px;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--muted2);
    transition: all 0.2s;
  }

  .toggle-track.on {
    background: rgba(52,199,89,0.12);
    border-color: rgba(52,199,89,0.3);
  }

  .toggle-track.on .toggle-thumb {
    left: 19px;
    background: var(--green);
  }

  /* ── Log panel ── */
  .log-area {
    background: var(--bg);
    border-radius: 3px;
    border: 1px solid var(--border);
    padding: 10px 12px;
    font-family: var(--font-mono);
    font-size: 10px;
    line-height: 1.7;
    min-height: 160px;
    max-height: 180px;
    overflow-y: auto;
    color: var(--muted);
    letter-spacing: 0.03em;
  }

  .log-area::-webkit-scrollbar { width: 3px; }
  .log-area::-webkit-scrollbar-thumb { background: var(--border); }

  .log-line { display: block; }
  .log-line.info { color: var(--muted); }
  .log-line.ok   { color: rgba(52,199,89,0.8); }
  .log-line.warn { color: rgba(255,204,0,0.7); }
  .log-line.gui  { color: rgba(232,232,228,0.4); }
  .log-line.ts {
    color: var(--muted2);
    display: inline;
    margin-right: 8px;
  }

  /* ── Decorative corner marks ── */
  .corner-marks {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 0;
  }

  .corner-mark {
    position: absolute;
    width: 12px;
    height: 12px;
  }

  .corner-mark::before, .corner-mark::after {
    content: '';
    position: absolute;
    background: var(--muted2);
  }

  .corner-mark::before { width: 1px; height: 100%; }
  .corner-mark::after  { width: 100%; height: 1px; }

  .corner-mark.tl { top: 8px; left: 8px; }
  .corner-mark.tr { top: 8px; right: 8px; transform: rotate(90deg); }
  .corner-mark.bl { bottom: 8px; left: 8px; transform: rotate(-90deg); }
  .corner-mark.br { bottom: 8px; right: 8px; transform: rotate(180deg); }

  /* ── Eye ornament in transport ── */
  .eye-ornament {
    opacity: 0.06;
    position: absolute;
    bottom: -10px;
    right: 12px;
    pointer-events: none;
  }

  /* Log header */
  .log-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 10px;
  }

  .btn-clear {
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 3px;
    padding: 3px 10px;
    font-family: var(--font-mono);
    font-size: 8px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--muted2);
    cursor: pointer;
  }

  .btn-clear:hover { color: var(--muted); border-color: var(--border-light); }

  /* phase label */
  .phase-tag {
    font-family: var(--font-mono);
    font-size: 7.5px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--muted2);
    border: 1px solid var(--border);
    border-radius: 2px;
    padding: 2px 7px;
  }
</style>
</head>
<body>
<div class="app">

  <!-- ── Header ── -->
  <header class="header">
    <div class="header-logo">
      <!-- Eye / root glyph (inline SVG approximating the brand mark) -->
      <svg class="logo-glyph" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <ellipse cx="12" cy="8" rx="6" ry="4" stroke="#e8e8e4" stroke-width="0.8" fill="none"/>
        <circle cx="12" cy="8" r="1.5" fill="#e8e8e4"/>
        <circle cx="12" cy="8" r="0.5" fill="#0f0f0f"/>
        <line x1="12" y1="12" x2="12" y2="20" stroke="#e8e8e4" stroke-width="0.7"/>
        <line x1="12" y1="14" x2="8"  y2="18" stroke="#e8e8e4" stroke-width="0.6"/>
        <line x1="12" y1="14" x2="16" y2="18" stroke="#e8e8e4" stroke-width="0.6"/>
        <line x1="12" y1="16" x2="9"  y2="20" stroke="#e8e8e4" stroke-width="0.5" opacity="0.5"/>
        <line x1="12" y1="16" x2="15" y2="20" stroke="#e8e8e4" stroke-width="0.5" opacity="0.5"/>
        <circle cx="7.5" cy="8" r="0.8" fill="#e8e8e4" opacity="0.3"/>
        <circle cx="16.5" cy="8" r="0.8" fill="#e8e8e4" opacity="0.3"/>
        <circle cx="10" cy="5.5" r="0.5" fill="#e8e8e4" opacity="0.3"/>
        <circle cx="14" cy="5.5" r="0.5" fill="#e8e8e4" opacity="0.3"/>
      </svg>
      <div>
        <div class="logo-name">sonoPleth <em>Real-Time Engine</em></div>
      </div>
    </div>

    <div class="header-pipeline">
      ADM <span>→</span> LUSID <span>⇒</span> Spatial Render
    </div>

    <div class="header-status">
      <div class="status-dot"></div>
      Running
    </div>
  </header>

  <!-- ── Content ── -->
  <div class="scroll-area">

    <!-- ── Input Configuration ── -->
    <div class="card">
      <div class="corner-marks">
        <div class="corner-mark tl"></div>
        <div class="corner-mark tr"></div>
        <div class="corner-mark bl"></div>
        <div class="corner-mark br"></div>
      </div>

      <div class="section-label">Input Configuration</div>

      <div class="field-row">
        <div class="field-label">Source</div>
        <div class="field-input filled" style="flex:1; font-size:9.5px;">sourceData/stereoTest_adm.wav</div>
        <div class="field-hint">✓ ADM WAV</div>
        <button class="btn-browse">Browse</button>
      </div>

      <div class="field-row">
        <div class="field-label">Speaker Layout</div>
        <select class="select-field">
          <option>AlloSphere</option>
          <option>Translab</option>
        </select>
        <div class="field-input filled" style="flex:1; font-size:9px; color: var(--muted);">spatial_engine/speaker_layouts/allosphere_layout.json</div>
        <button class="btn-browse">Browse</button>
      </div>

      <div class="field-row">
        <div class="field-label">Remap CSV</div>
        <select class="select-field" style="width:140px;">
          <option>None</option>
          <option>Allosphere Example</option>
        </select>
        <div class="field-input" style="flex:1; font-size:9.5px;">channel_remap.csv (leave blank for identity)…</div>
        <button class="btn-browse">Browse</button>
      </div>

      <div class="opts-row">
        <div class="field-label" style="flex:none;">Buffer Size</div>
        <select class="select-field" style="width:88px;">
          <option>512</option>
          <option>64</option>
          <option>128</option>
          <option>256</option>
          <option>1024</option>
        </select>
        <div style="width:20px;"></div>
        <label class="checkbox-row">
          <div class="checkbox-box"></div>
          Scan Audio (ADM only, +~14s startup)
        </label>
      </div>
    </div>

    <!-- ── Transport ── -->
    <div class="card" style="position:relative; overflow:hidden;">
      <!-- Decorative eye watermark -->
      <svg class="eye-ornament" width="120" height="80" viewBox="0 0 120 80" fill="none">
        <ellipse cx="60" cy="30" rx="50" ry="25" stroke="white" stroke-width="1.5"/>
        <circle cx="60" cy="30" r="12" stroke="white" stroke-width="1.5"/>
        <circle cx="60" cy="30" r="5" fill="white"/>
        <circle cx="42" cy="28" r="1.5" fill="white" opacity="0.5"/>
        <circle cx="78" cy="28" r="1.5" fill="white" opacity="0.5"/>
        <circle cx="50" cy="22" r="1" fill="white" opacity="0.4"/>
        <circle cx="70" cy="22" r="1" fill="white" opacity="0.4"/>
        <line x1="60" y1="55" x2="60" y2="78" stroke="white" stroke-width="1"/>
        <line x1="60" y1="60" x2="50" y2="72" stroke="white" stroke-width="0.8"/>
        <line x1="60" y1="60" x2="70" y2="72" stroke="white" stroke-width="0.8"/>
        <line x1="60" y1="66" x2="53" y2="78" stroke="white" stroke-width="0.6"/>
        <line x1="60" y1="66" x2="67" y2="78" stroke="white" stroke-width="0.6"/>
      </svg>

      <div class="section-label">Transport</div>

      <div class="transport-row">
        <button class="btn btn-secondary btn-disabled">Start</button>
        <button class="btn btn-secondary">Stop</button>
        <button class="btn btn-danger">Kill</button>
        <button class="btn btn-secondary">Restart</button>
        <div class="spacer"></div>
        <div class="pill">
          <div class="pill-dot"></div>
          Running
        </div>
      </div>

      <div class="transport-row">
        <button class="btn btn-secondary">Pause</button>
        <button class="btn btn-secondary btn-disabled">Play</button>
        <div class="spacer"></div>
        <div class="osc-label">OSC port&nbsp;<span>9009</span></div>
        <div style="width:12px;"></div>
        <button class="btn btn-secondary">Copy Command</button>
      </div>
    </div>

    <!-- ── Runtime Controls ── -->
    <div class="card">
      <div class="section-label">Runtime Controls <span style="letter-spacing:0.08em; color: var(--muted2); font-size: 8px; margin-left:4px;">live osc → 127.0.0.1:9009</span></div>

      <!-- Master Gain -->
      <div class="param-row">
        <div class="param-label">Master Gain</div>
        <div class="param-track">
          <div class="param-fill" style="width:50%"></div>
          <div class="param-thumb" style="left:50%"></div>
        </div>
        <div class="param-value">0.50</div>
        <div class="param-osc">/gain</div>
      </div>

      <!-- DBAP Focus -->
      <div class="param-row">
        <div class="param-label">DBAP Focus</div>
        <div class="param-track">
          <div class="param-fill" style="width:27%"></div>
          <div class="param-thumb" style="left:27%"></div>
        </div>
        <div class="param-value">1.50</div>
        <div class="param-osc">/focus</div>
      </div>

      <!-- Speaker Mix dB -->
      <div class="param-row">
        <div class="param-label">Speaker Mix  (dB)</div>
        <div class="param-track">
          <div class="param-fill" style="width:50%"></div>
          <div class="param-thumb" style="left:50%"></div>
        </div>
        <div class="param-value">0.0</div>
        <div class="param-osc">/spk_mix</div>
      </div>

      <!-- Sub Mix dB -->
      <div class="param-row">
        <div class="param-label">Sub Mix  (dB)</div>
        <div class="param-track">
          <div class="param-fill" style="width:50%"></div>
          <div class="param-thumb" style="left:50%"></div>
        </div>
        <div class="param-value">0.0</div>
        <div class="param-osc">/sub_mix</div>
      </div>

      <!-- Auto-comp toggle -->
      <div class="toggle-row">
        <div class="param-label">Focus Auto-Compensation</div>
        <div class="toggle-track" id="toggle">
          <div class="toggle-thumb"></div>
        </div>
        <div style="font-family: var(--font-mono); font-size:9px; letter-spacing:0.1em; color: var(--muted2); text-transform:uppercase; margin-left:6px;">Off</div>
      </div>
    </div>

    <!-- ── Engine Log ── -->
    <div class="card">
      <div class="log-header">
        <div class="section-label" style="margin-bottom:0; flex:1;">Engine Log</div>
        <span class="phase-tag">Phase 10</span>
        <div style="width:10px;"></div>
        <button class="btn-clear">Clear</button>
      </div>

      <div class="log-area">
        <span class="log-line gui"><span class="ts">—</span>[GUI] Starting engine — source: sourceData/stereoTest_adm.wav</span>
        <span class="log-line info"><span class="ts">—</span>[Runner] Process started — waiting for ParameterServer…</span>
        <span class="log-line info"><span class="ts">—</span>[stderr] Initializing AlloLib audio engine…</span>
        <span class="log-line info"><span class="ts">—</span>[stderr] Loading speaker layout: allosphere_layout.json (64 speakers)</span>
        <span class="log-line info"><span class="ts">—</span>[stderr] Parsing ADM metadata from WAV… done</span>
        <span class="log-line warn"><span class="ts">—</span>[stderr] Warning: channel 3 has no bed position — using default</span>
        <span class="log-line ok" ><span class="ts">—</span>ParameterServer listening on port 9009</span>
        <span class="log-line gui"><span class="ts">—</span>[Runner] Engine ready — flushing control state via OSC</span>
        <span class="log-line ok" ><span class="ts">—</span>[stderr] DBAP renderer running · 64 speakers · 512 buf · 48kHz</span>
        <span class="log-line info"><span class="ts">—</span>[stderr] Spatial render active ■■■■■■■■■■■■□□□□□□□□</span>
      </div>
    </div>

  </div><!-- /scroll-area -->

</div><!-- /app -->

<script>
  // Toggle interaction
  const t = document.getElementById('toggle');
  let on = false;
  t.addEventListener('click', () => {
    on = !on;
    t.classList.toggle('on', on);
    t.nextElementSibling.textContent = on ? 'On' : 'Off';
    if (on) t.nextElementSibling.style.color = 'rgba(52,199,89,0.8)';
    else t.nextElementSibling.style.color = 'var(--muted2)';
  });

  // Simple slider drag mockup
  document.querySelectorAll('.param-track').forEach(track => {
    const fill = track.querySelector('.param-fill');
    const thumb = track.querySelector('.param-thumb');
    const row = track.closest('.param-row');
    const valEl = row?.querySelector('.param-value');
    const label = row?.querySelector('.param-label')?.textContent.trim() || '';

    function update(e) {
      const rect = track.getBoundingClientRect();
      let pct = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
      fill.style.width = (pct * 100) + '%';
      thumb.style.left = (pct * 100) + '%';
      if (valEl) {
        if (label.includes('dB')) {
          valEl.textContent = ((pct - 0.5) * 20).toFixed(1);
        } else if (label.includes('Focus')) {
          valEl.textContent = (0.2 + pct * 4.8).toFixed(2);
        } else {
          valEl.textContent = pct.toFixed(2);
        }
      }
    }

    let dragging = false;
    track.addEventListener('mousedown', e => { dragging = true; update(e); });
    document.addEventListener('mousemove', e => { if (dragging) update(e); });
    document.addEventListener('mouseup', () => { dragging = false; });
  });
</script>
</body>
</html>
